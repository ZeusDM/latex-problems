Find all functions $f(x)$ defined in the range $\left(-\frac\pi2,\frac\pi2\right)$ that are differentiable at $0$ and satisfy
$$f(x)=\frac12\left(1+\frac1{\cos x}\right)f\left(\frac x2\right)$$for every $x$ in the range $\left(-\frac\pi2,\frac\pi2\right)$.

\textit{L. Davidov}