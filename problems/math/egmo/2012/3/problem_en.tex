Find all functions $f:\mathbb{R}\to\mathbb{R}$ such that \[f\left(yf\left(x+y\right)+f\left(x\right)\right)=4x+2yf\left(x+y\right)\] for all $x,y\in\mathbb{R}$.