Define $\left\lVert A-B \right\rVert = (x_A-x_B)^2+(y_A-y_B)^2$ for every two points $A = (x_A, y_A)$ and $B = (x_B, y_B)$ in the plane.
Let $S$ be the set of points $(x,y)$ in the plane for which $x,y \in \left\{ 0,1,\dots,100 \right\}$.
Find the number of functions $f : S \to S$ such that $\left\lVert A-B \right\rVert \equiv \left\lVert f(A)-f(B) \right\rVert \pmod{101}$ for any $A, B \in S$.
