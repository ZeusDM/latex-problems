Find the greatest integer $n$, such that there are $n+4$ points $A$, $B$, $C$, $D$, $X_1,\dots,~X_n$ in the plane with $AB\ne CD$ that satisfy the following condition: for each $i=1,2,\dots,n$ triangles $ABX_i$ and $CDX_i$ are equal.