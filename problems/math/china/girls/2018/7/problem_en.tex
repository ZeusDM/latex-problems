Consider a $2018\times4$ grid of squares. Let $M$ be the number of ways to color each square of the grid either red or blue such that each row has the same number of red squares and each column has the same number of blue squares. Find the remainder when $M$ is divided by $2018$.