Let $n$ be a positive integer and let $a_1 \le a_2 \le \dots \le a_n$ and $b_1 \le b_2 \le \dots \le b_n$ be two nondecreasing sequences of real numbers such that \[ a_1 + \dots + a_i \le b_1 + \dots + b_i  \text{ for every } i = 1, \dots, n \] and \[ a_1 + \dots + a_n = b_1 + \dots + b_n. \] Suppose that for every real number $m$, the number of pairs $(i,j)$ with $a_i-a_j=m$ equals the numbers of pairs $(k,\ell)$ with $b_k-b_\ell = m$. Prove that $a_i = b_i$ for $i=1,\dots,n$.