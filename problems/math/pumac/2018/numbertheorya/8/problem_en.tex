Let $p$ be a prime. Let $f(x)$ be the number of ordered pairs $(a, b)$ of positive integers less than $p$,  such that $a^b \equiv x \pmod p$. Suppose that there do not exist positive integers $x$ and $y$,  both less than $p$,  such that $f(x) = 2f(y)$,  and that the maximum value of $f$ is greater than $2018$. Find the smallest possible value of $p$.