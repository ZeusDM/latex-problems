On an $n$ by $n$ chessboard, numbers are written on each square so that the number in a square is the average of the numbers on the adjacent squares. Show that all the numbers are the same.