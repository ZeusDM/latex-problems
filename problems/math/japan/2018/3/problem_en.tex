Let $S=\{1,2,\ldots ,999\}$. Consider a function $f: S\to S$, such that for any $n\in S$,$$f^{n+f(n)+1}(n)=f^{nf(n)}(n)=n.$$Prove that there exists $a\in S$, such that $f(a)=a$. Here $f^k(n) = \underbrace{f(f(\ldots f}_{k}(n)\ldots))$.