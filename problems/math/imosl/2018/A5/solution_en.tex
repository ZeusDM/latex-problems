The solutions are $ax+\frac{b}{x}$ for any constants $a,b\in\mathbb{R}$. These work because $x,\frac{1}{x}$ are solutions and the solution set is a vector space over $\mathbb{R}$.

Observe that
\begin{align*}
	\left(x+\frac{1}{x}\right)f(x)&=f(x^2)+f(1)\\
	&=\left(\frac{x}{2}+\frac{2}{x}\right)f(2x)-f(4)+f(1)\\
	&=\frac{\frac{x}{2}+\frac{2}{x}}{2x+\frac{1}{2x}}\left[f(4x^2)+f(1)\right]-f(4)+f(1)\\
	&=\frac{\frac{x}{2}+\frac{2}{x}}{2x+\frac{1}{2x}}\left[\left(4x+\frac{1}{4x}\right)f(x)-f(\frac{1}{4})+f(1)\right]-f(4)+f(1)
\end{align*}
where we used the substitutions $(x,x)$, $(\frac{x}{2},2x)$, $(2x,2x)$, and $(4x,\frac{1}{4x})$. So \[\left(f(\frac{1}{4})-f(1)\right)\cdot\frac{\frac{x}{2}+\frac{2}{x}}{2x+\frac{1}{2x}}+f(4)-f(1)=\left[\frac{\left(\frac{x}{2}+\frac{2}{x}\right)\left(4x+\frac{1}{4x}\right)}{2x+\frac{1}{2x}}-\left(x+\frac{1}{x}\right)\right]f(x)=\frac{\frac{45}{8}}{2x+\frac{1}{2x}}\cdot f(x)\] and thus
\begin{align*}
	f(x)&=\frac{8}{45}\left(f(\frac{1}{4})-f(1)\right)\left(\frac{x}{2}+\frac{2}{x}\right)+\frac{8}{45}\left(f(4)-f(1)\right)\left(2x+\frac{1}{2x}\right)\\
	&=\frac{4f(\frac{1}{4})-20f(1)+16f(4)}{45}\cdot x+\frac{16f(\frac{1}{4})-20f(1)+4f(4)}{45}\cdot\frac{1}{x}
\end{align*}
as desired.