For every $ n\in\mathbb{N}$ let $ d(n)$ denote the number of (positive) divisors of $ n$. Find all functions $ f: \mathbb{N}\to\mathbb{N}$ with the following properties:

$ d\left(f(x)\right) = x$ for all $ x\in\mathbb{N}$.$ f(xy)$ divides $ (x - 1)y^{xy - 1}f(x)$ for all $ x$,  $ y\in\mathbb{N}$.