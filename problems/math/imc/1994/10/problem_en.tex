Let $A$ be a $n\times n$ diagonal matrix with characteristic polynomial
$$(x-c_1)^{d_1}(x-c_2)^{d_2}\ldots (x-c_k)^{d_k}$$where $c_1, c_2, \ldots, c_k$ are distinct (which means that $c_1$ appears $d_1$ times on the diagonal, $c_2$ appears $d_2$ times on the diagonal, etc. and $d_1+d_2+\ldots + d_k=n$).

Let $V$ be the space of all $n\times n$ matrices $B$ such that $AB=BA$. Prove that the dimension of $V$ is
$$d_1^2+d_2^2+\cdots + d_k^2$$