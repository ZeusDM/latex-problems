Let $P_k(x)=1+x+x^2+\ldots +x^{k-1}$. Show that\[ \sum_{k=1}^n \binom{n}{k} P_k(x)=2^{n-1} P_n \left( \frac{x+1}{2} \right) \]

for every real number $x$ and every positive integer $n$.