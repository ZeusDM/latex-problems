Find all functions $f:\mathbb{R}\to\mathbb{R}$ satisfying the equation \[|x|f(y)+yf(x)=f(xy)+f(x^2)+f(f(y))\]for all real numbers $x$ and $y$.