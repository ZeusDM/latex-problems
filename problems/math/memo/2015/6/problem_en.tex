Determine all functions $f:\mathbb{R}\setminus\{0\}\to \mathbb{R}\setminus\{0\}$ such that$$f(x^2yf(x))+f(1)=x^2f(x)+f(y)$$

holds for all nonzero real numbers $x$ and $y$.