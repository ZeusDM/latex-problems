For an integer $n \geq 3$,  let $\mathcal M$ be the set $\{(x, y) | x, y \in \mathbb Z, 1 \leq  x \leq  n, 1 \leq  y \leq  n\}$ of points in the plane.

What is the maximum possible number of points in a subset $S \subseteq \mathcal M$ which does not contain three distinct points being the vertices of a right triangle?