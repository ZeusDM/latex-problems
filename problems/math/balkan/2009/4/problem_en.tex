Denote by $ S$ the set of all positive integers. Find all functions $ f: S \rightarrow S$ such that\[ f (f^2(m) + 2f^2(n)) = m^2 + 2 n^2\]

for all $ m,n \in S$.Bulgaria