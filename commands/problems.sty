\ProvidesPackage{problems}

%--------
%
% Options
%
%--------

% global / persection
%
% Defines if the amsthm is numbered through the whole file or per section.

\newif\ifmypackage@amsthmglobal
\DeclareOption{global}{\mypackage@amsthmglobaltrue}
\DeclareOption{persection}{\mypackage@amsthmglobalfalse}

% id / noid
%
% Defines if the path of each problem is shown or not.

\newif\ifmypackage@showid
\DeclareOption{noid}{\mypackage@showidfalse}
\DeclareOption{id}{\mypackage@showidtrue}

% usualnotation / zeusnotation
%
% Defines if it uses usual notation or my notation.

\newif\ifmypackage@usualnotation
\DeclareOption{zeusnotation}{\mypackage@usualnotationfalse}
\DeclareOption{usualnotation}{\mypackage@usualnotationtrue}

% chemistry / nochemistry
%
% Defines if it will import  

\ExecuteOptions{noid, global, zeusnotation}

\ProcessOptions\relax

%-----------------
%
% Require Packages
%
%-----------------

\RequirePackage{babel}
\RequirePackage{suffix}
\RequirePackage{enumitem}
\RequirePackage{xcolor}
\RequirePackage{import}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{graphicx}
\RequirePackage{enumitem}
\RequirePackage{url}
\RequirePackage{siunitx}
\RequirePackage{tikz}
\RequirePackage{hyperref}
\RequirePackage{cleveref}
\RequirePackage{dsfont}
\RequirePackage{ifmtarg}
\RequirePackage{titlesec}
\RequirePackage{textcomp}

%----------
%
% zeustitle
%
%----------

% Defines a substitute for \maketitle

\newcommand{\ZeusMail}{}
\newcommand{\ZeusTitleL}{}
\newcommand{\ZeusTitleR}{}
\newcommand{\ZeusAuthor}{}
\newcommand{\ZeusTitle}{}

\renewcommand{\title}[1]{
	\def\@title{#1}
	\def\ZeusTitle{#1}
}
\renewcommand{\author}[1]{
	\def\@author{#1}
	\def\ZeusAuthor{#1}
}
\newcommand{\mail}[1]{
	\def\ZeusMail{#1}
}
\newcommand{\titlel}[1]{
	\def\ZeusTitleL{#1}
}
\newcommand{\titler}[1]{
	\def\ZeusTitleR{#1}
}
\newcommand{\mailfoe}{
	\\\vspace{0mm}
	{\ZeusMail}
}
\newcommand{\nomail}{
	\def\mailfoe{}
}

\newcommand{\zeustitle}{
	{\noindent \, \large \sc \ZeusTitleL}
	\hfill
	{\sc \ZeusTitleR}
	\vspace{3mm}
	\hrule
 	\hrule
 	\vspace{0mm}
	\begin{center}
		{\Large \@title}\\\vspace{1mm}
		{\large \@author}
		\mailfoe
	\end{center}
	\vspace{0mm}
	\hrule
	\hrule
 	\vspace{2mm}
}

%-----------------
%
% Redefine section
%
%-----------------

\titleformat{\section}[hang]{}{\textcolor{sec1}{\bfseries \raisebox{2pt}{\S} \unskip\Large\sffamily \thesection}}{1em}{\Large\bfseries\sffamily}[]
\titleformat{\section}[hang]{}{\textcolor{sec1}{\bfseries\Large\S\sffamily\thesection}}{1em}{\Large\bfseries\sffamily}[]

%--------------------
%
% exercise e solution
%
%--------------------

% Defines how to get exercises and solutions from the database

\newcommand{\mypath}{}
\newcommand{\id}[1]{}
\ifmypackage@showid
	\renewcommand{\id}[1]{
		
		{\noindent}  \hfill \textcolor{blue}{\texttt{Path: \path{#1}}}

	}
\fi

\newcommand{\IfProblemHasSource}[3]{
	\IfFileExists{\mypath problems/#1/source_pt.tex}{#2}{%
		\IfFileExists{\mypath problems/#1/source_en.tex}{#2}{%
			\IfFileExists{\mypath problems/#1/source.tex}{#2}{%
				\IfFileExists{\mypath problems/#1/../source_pt.tex}{#2}{%
					\IfFileExists{\mypath problems/#1/../source_en.tex}{#2}{%
						\IfFileExists{\mypath problems/#1/../source.tex}{#2}{#3}}}}}}}

\newcommand{\IfProblemHasNumber}[3]{
	\ignorespaces\IfFileExists{\mypath problems/#1/number.tex}{\ignorespaces #2}{\ignorespaces #3}}


\newcommand{\exercise}[1]{
	\IfProblemHasSource{#1}{(\unskip\source{#1}\unskip)}{}
	\IfFileExists{\mypath problems/#1/problem_pt.tex}{\subimport{\mypath problems/#1/}{problem_pt.tex}}{%
	\IfFileExists{\mypath problems/#1/problem_en.tex}{\subimport{\mypath problems/#1/}{problem_en.tex}}{\textcolor{red}{Problema \path{#1} não encontrado!}}}%
	\id{#1}%
}

\WithSuffix\newcommand\exercise*[1]{%
		\IfFileExists{\mypath problems/#1/problem_pt.tex}{\subimport{\mypath problems/#1/}{problem_pt.tex}}{%
		\IfFileExists{\mypath problems/#1/problem_en.tex}{\subimport{\mypath problems/#1/}{problem_en.tex}}{\textcolor{red}{Problema \path{#1} não encontrado!}}}%
		\id{#1}%
}

\newcommand{\solutionfoe}[1]{
		\IfFileExists{\mypath problems/#1/solution_pt.tex}{\subimport{\mypath problems/#1/}{solution_pt.tex}}{%
		\IfFileExists{\mypath problems/#1/solution_en.tex}{\subimport{\mypath problems/#1/}{solution_en.tex}}{\textcolor{red}{Solução \path{#1} não encontrada!}}}%
		\id{#1}%
}

\newcommand{\sourcefoe}[1]{
		\IfFileExists{\mypath problems/#1/source_pt.tex}{\input{\mypath problems/#1/source_pt.tex}}{%
		\IfFileExists{\mypath problems/#1/source_en.tex}{\input{\mypath problems/#1/source_en.tex}}{%
		\IfFileExists{\mypath problems/#1/source.tex}{\input{\mypath problems/#1/source.tex}}{%
		\IfFileExists{\mypath problems/#1/../source_pt.tex}{\input{\mypath problems/#1/../source_pt.tex}}{%
		\IfFileExists{\mypath problems/#1/../source_en.tex}{\input{\mypath problems/#1/../source_en.tex}}{%
		\IfFileExists{\mypath problems/#1/../source.tex}{\input{\mypath problems/#1/../source.tex}}{%
		}}}}}}
}

\newcommand{\numberfoe}[1]{
		\IfFileExists{\mypath problems/#1/number.tex}{\input{\mypath problems/#1/number.tex}}{}
}

\newcommand{\source}[1]{
	\sourcefoe{#1}\ignorespaces\IfProblemHasNumber{#1}{\unskip\unskip\unskip,\unskip\unskip\unskip{\ }\unskip\unskip\numberfoe{#1}}{}
}


%-------------------------------------------
%
% Definindo theorem-like amsthm environments
%
%-------------------------------------------

\definecolor{prim++}{HTML}{FFA4D0}
\definecolor{prim+}{HTML}{FF70B6}
\definecolor{prim}{HTML}{FF007D}
\definecolor{prim-}{HTML}{B40058}
\definecolor{prim--}{HTML}{8A0044}
\definecolor{sec1++}{HTML}{45BBB2}
\definecolor{sec1+}{HTML}{26BBB0}
\definecolor{sec1}{HTML}{008D82}
\definecolor{sec1-}{HTML}{16706A}
\definecolor{sec1--}{HTML}{00655E}
\definecolor{sec2++}{HTML}{FFD3A4}
\definecolor{sec2+}{HTML}{FFBA70}
\definecolor{sec2}{HTML}{FF8500}
\definecolor{sec2-}{HTML}{D97100}
\definecolor{sec2--}{HTML}{A75700}
\definecolor{comp++}{HTML}{D2F29B}
\definecolor{comp+}{HTML}{B6E36B}
\definecolor{comp}{HTML}{93C342}
\definecolor{comp-}{HTML}{77A724}
\definecolor{comp--}{HTML}{58850C}

%Theorem style
\newtheoremstyle{simpleprim}% % Theorem style name
  {5pt}% Space above
  {5pt}% Space below
  {\normalfont}% % Body font
  {}% Indent amount
  {\small\bfseries\color{prim}}% % Theorem head font
  {\;}% Punctuation after theorem head
  {0.25em}% Space after theorem head
  {\small\color{prim}\thmname{#1}\nobreakspace\thmnumber{#2} % Theorem text (e.g. Theorem 2.1)
  \thmnote{\nobreakspace\the\thm@notefont\bfseries\color{black} (#3)}} % Optional theorem note

\newtheoremstyle{simplesec1}% % Theorem style name
  {5pt}% Space above
  {5pt}% Space below
  {\normalfont}% % Body font
  {}% Indent amount
  {\small\bfseries\color{sec1}}% % Theorem head font
  {\;}% Punctuation after theorem head
  {0.25em}% Space after theorem head
  {\small\color{sec1}\thmname{#1}\nobreakspace\thmnumber{#2} % Theorem text (e.g. Theorem 2.1)
  \thmnote{\nobreakspace\the\thm@notefont\bfseries\color{black} (#3)}} % Optional theorem note

\newtheoremstyle{simplesec2}% % Theorem style name
  {5pt}% Space above
  {5pt}% Space below
  {\normalfont}% % Body font
  {}% Indent amount
  {\small\bfseries\color{sec2}}% % Theorem head font
  {\;}% Punctuation after theorem head
  {0.25em}% Space after theorem head
  {\small\color{sec2}\thmname{#1}\nobreakspace\thmnumber{#2} % Theorem text (e.g. Theorem 2.1)
  \thmnote{\nobreakspace\the\thm@notefont\bfseries\color{black} (#3)}} % Optional theorem note

\newtheoremstyle{simplecomp}% % Theorem style name
  {5pt}% Space above
  {5pt}% Space below
  {\normalfont}% % Body font
  {}% Indent amount
  {\small\bfseries\color{comp}}% % Theorem head font
  {\;}% Punctuation after theorem head
  {0.25em}% Space after theorem head
  {\small\color{comp}\thmname{#1}\nobreakspace\thmnumber{#2} % Theorem text (e.g. Theorem 2.1)
  \thmnote{\nobreakspace\the\thm@notefont\bfseries\color{black} (#3)}} % Optional theorem note
     
% Definindo nomes para diferentes linguagens em babel

\newcommand{\theoremname}{}
\newcommand{\lemmaname}{}
\newcommand{\propositionname}{}
\newcommand{\corollaryname}{}
\newcommand{\definitionname}{}
\newcommand{\conjecturename}{}
\newcommand{\examplename}{}
\newcommand{\problemname}{}
\newcommand{\remarkname}{}
\newcommand{\notename}{}
\newcommand{\solutionname}{}

\addto\captionsenglish{\renewcommand{\theoremname}{Theorem}}
\addto\captionsenglish{\renewcommand{\lemmaname}{Lemma}}
\addto\captionsenglish{\renewcommand{\propositionname}{Proposition}}
\addto\captionsenglish{\renewcommand{\corollaryname}{Corollary}}
\addto\captionsenglish{\renewcommand{\definitionname}{Definition}}
\addto\captionsenglish{\renewcommand{\conjecturename}{Conjecture}}
\addto\captionsenglish{\renewcommand{\examplename}{Exemple}}
\addto\captionsenglish{\renewcommand{\problemname}{Problem}}
\addto\captionsenglish{\renewcommand{\remarkname}{Remark}}
\addto\captionsenglish{\renewcommand{\notename}{Note}}
\addto\captionsenglish{\renewcommand{\solutionname}{Solution}}

\addto\captionsenglish{\crefname{thm}{Theorem}{Theorems}}
\addto\captionsenglish{\crefname{lem}{Lemma}{Lemmas}}
\addto\captionsenglish{\crefname{prop}{Proposition}{Propositions}}
\addto\captionsenglish{\crefname{cor}{Corollary}{Corollaries}}
\addto\captionsenglish{\crefname{defn}{Definition}{Definitions}}
\addto\captionsenglish{\crefname{conj}{Conjecture}{Conjectures}}
\addto\captionsenglish{\crefname{exam}{Example}{Examples}}
\addto\captionsenglish{\crefname{prob}{Problem}{Problems}}
\addto\captionsenglish{\crefname{rem}{Remark}{Remarks}}
\addto\captionsenglish{\crefname{note}{Note}{Notes}}
\addto\captionsenglish{\crefname{sol}{Solution}{Solutions}}

\addto\captionsbrazilian{\renewcommand{\theoremname}{Teorema}}
\addto\captionsbrazilian{\renewcommand{\lemmaname}{Lema}}
\addto\captionsbrazilian{\renewcommand{\propositionname}{Proposição}}
\addto\captionsbrazilian{\renewcommand{\corollaryname}{Corolário}}
\addto\captionsbrazilian{\renewcommand{\definitionname}{Definição}}
\addto\captionsbrazilian{\renewcommand{\conjecturename}{Conjectura}}
\addto\captionsbrazilian{\renewcommand{\examplename}{Exemplo}}
\addto\captionsbrazilian{\renewcommand{\problemname}{Problema}}
\addto\captionsbrazilian{\renewcommand{\remarkname}{Observação}}
\addto\captionsbrazilian{\renewcommand{\notename}{Nota}}
\addto\captionsbrazilian{\renewcommand{\solutionname}{Solução}}

\addto\captionsbrazilian{\crefname{thm}{Teorema}{Teoremas}}
\addto\captionsbrazilian{\crefname{lem}{Lema}{Lemas}}
\addto\captionsbrazilian{\crefname{prop}{Proposição}{Proposições}}
\addto\captionsbrazilian{\crefname{cor}{Corolário}{Corolários}}
\addto\captionsbrazilian{\crefname{defn}{Definição}{Definições}}
\addto\captionsbrazilian{\crefname{conj}{Conjectura}{Conjecturas}}
\addto\captionsbrazilian{\crefname{exam}{Exemplo}{Exemplos}}
\addto\captionsbrazilian{\crefname{prob}{Problema}{Problemas}}
\addto\captionsbrazilian{\crefname{rem}{Observação}{Observações}}
\addto\captionsbrazilian{\crefname{note}{Nota}{Notas}}
\addto\captionsbrazilian{\crefname{sol}{Solução}{Soluções}}

\addto\captionsbrazil{\renewcommand{\theoremname}{Teorema}}
\addto\captionsbrazil{\renewcommand{\lemmaname}{Lema}}
\addto\captionsbrazil{\renewcommand{\propositionname}{Proposição}}
\addto\captionsbrazil{\renewcommand{\corollaryname}{Corolário}}
\addto\captionsbrazil{\renewcommand{\definitionname}{Definição}}
\addto\captionsbrazil{\renewcommand{\conjecturename}{Conjectura}}
\addto\captionsbrazil{\renewcommand{\examplename}{Exemplo}}
\addto\captionsbrazil{\renewcommand{\problemname}{Problema}}
\addto\captionsbrazil{\renewcommand{\remarkname}{Observação}}
\addto\captionsbrazil{\renewcommand{\notename}{Nota}}
\addto\captionsbrazil{\renewcommand{\solutionname}{Solução}}

\addto\captionsbrazil{\crefname{thm}{Teorema}{Teoremas}}
\addto\captionsbrazil{\crefname{lem}{Lema}{Lemas}}
\addto\captionsbrazil{\crefname{prop}{Proposição}{Proposições}}
\addto\captionsbrazil{\crefname{cor}{Corolário}{Corolários}}
\addto\captionsbrazil{\crefname{defn}{Definição}{Definições}}
\addto\captionsbrazil{\crefname{conj}{Conjectura}{Conjecturas}}
\addto\captionsbrazil{\crefname{exam}{Exemplo}{Exemplos}}
\addto\captionsbrazil{\crefname{prob}{Problema}{Problemas}}
\addto\captionsbrazil{\crefname{rem}{Observação}{Observações}}
\addto\captionsbrazil{\crefname{note}{Nota}{Notas}}
\addto\captionsbrazil{\crefname{sol}{Solução}{Soluções}}

\theoremstyle{simplesec1}
\ifmypackage@amsthmglobal
	\newtheorem{thm}{\theoremname}
\else
	\newtheorem{thm}{\theoremname}[section]
\fi
\newtheorem{lem}[thm]{\lemmaname}
\newtheorem{prop}[thm]{\propositionname}
\newtheorem*{cor}{\corollaryname}

\ifmypackage@amsthmglobal
	\newtheorem{defn}{\definitionname}
	\newtheorem{conj}{\conjecturename}
	\theoremstyle{simplesec2}
	\newtheorem{exmp}{\examplename}
	\newtheorem{prob}{\problemname}
\else
	\newtheorem{defn}{\definitionname}[section]
	\newtheorem{conj}{\conjecturename}[section]
	\theoremstyle{simplesec2}
	\newtheorem{exmp}{\examplename}[section]
	\newtheorem{prob}{\problemname}[section]
\fi

\newtheoremstyle{newremark}%
	{3pt}%
	{3pt}%
	{}%
	{0pt}%
	{}%
	{}%
	{ }%
	{\textit{\thmname{#1}\thmnumber{ #2}\thmnote{ #3}.}}%


\theoremstyle{newremark}
\newtheorem*{rem}{\remarkname}
\newtheorem*{note}{\notename}
\newtheorem*{sol}{\solutionname}

\newcommand{\problem}[2][]{
	\IfProblemHasSource{#2}{%
		\begin{prob}[\ignorespaces\source{#2}\unskip\unskip\unskip\unskip]
			\exercise*{#2#1}
		\end{prob}
		}{%
		\begin{prob}
			\exercise*{#2#1}
		\end{prob}
		}
}

\WithSuffix\newcommand\problem*[1]{
	\begin{prob}
		\exercise*{#1}
	\end{prob}
}

\newcommand{\solution}[1]{
	\begin{sol}
		\solutionfoe{#1}
	\end{sol}
}

%------------------------------------------------------------------
%
% Definindo nomes especiais para os jogadores em problemas de jogos
%
%------------------------------------------------------------------

\newcommand{\playerA}[1]{#1}

\newcommand{\playerB}[1]{#1}

\newcommand{\playerC}[1]{#1}

\newcommand{\playerD}[1]{#1}

%----------------------------------------------
%
% Definindo expressões matemáticas em português
%
%----------------------------------------------

\DeclareMathOperator{\sen}{sen}
\DeclareMathOperator{\tg}{tg}
\DeclareMathOperator{\mmc}{mmc}
\DeclareMathOperator{\mdc}{mdc}

\newcommand{\RR}{\mathbb{R}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\EE}{\mathbb{E}}
\newcommand{\PP}{\mathbb{P}}

\newcommand{\Exp}{\mathds{E}}
\newcommand{\Prob}{\mathds{P}}

\newcommand{\floor}[1]{\left \lfloor{#1}\right \rfloor}
\newcommand{\ceil}[1]{\left \lceil{#1}\right \rceil}

%--------------
%
% Setup SIUnitx
%
%--------------

\sisetup{output-decimal-marker = {,}}


%-------------------------
%
% scaleroman and scalealph
%
%-------------------------

\DeclareRobustCommand{\scaleroman}[1]{\makebox[\widthof{iii}]{#1}}
\DeclareRobustCommand{\scalealph}[1]{\makebox[\widthof{b}]{#1}}

%-------------------------
%
% Declaring my own nomenclarures, which may change to usual nomenclatrue, if I want to. 
%
%-------------------------

% Collinear and Concliclic

\newcommand{\collinearproposition}{}
\newcommand{\conciclicproposition}{}
\newcommand{\andname}{}

\addto\captionsenglish{\renewcommand\collinearproposition{are collinear}}
\addto\captionsenglish{\renewcommand\conciclicproposition{are conciclic}}
\addto\captionsenglish{\renewcommand\andname{and}}

\addto\captionsbrazil{\renewcommand\collinearproposition{são colineares}}
\addto\captionsbrazil{\renewcommand\conciclicproposition{são concíclicos}}
\addto\captionbrazil{\renewcommand\andname{e}}

\addto\captionsbrazilian{\renewcommand\collinearproposition{são colineares}}
\addto\captionsbrazilian{\renewcommand\conciclicproposition{são concíclicos}}
\addto\captionsbrazilian{\renewcommand\andname{e}}

\newcommand{\col}[1]{%
	\diagup(#1\colchecknextarg
}
\newcommand{\colchecknextarg}{\@ifnextchar\bgroup{\colgobblenextarg}{)}}
\newcommand{\colgobblenextarg}[1]{, #1\@ifnextchar\bgroup{\colgobblenextarg}{)}}

\newcommand{\conc}[1]{%
	{\circ\,}(#1\concchecknextarg
}
\newcommand{\concchecknextarg}{\@ifnextchar\bgroup{\concgobblenextarg}{)}}
\newcommand{\concgobblenextarg}[1]{, #1\@ifnextchar\bgroup{\concgobblenextarg}{)}}

\ifmypackage@usualnotation
	\renewcommand{\col}[1]{%
		#1\colchecknextarg
	}
	\renewcommand{\colchecknextarg}{\@ifnextchar\bgroup{\colgobblenextarg}{\text{ \collinearproposition}}}
	\renewcommand{\colgobblenextarg}[1]{, #1\@ifnextchar\bgroup{\colgobblenextarg}{\text{ \collinearproposition}}}

	\renewcommand{\conc}[1]{%
		#1\concchecknextarg
	}
	\renewcommand{\concchecknextarg}{\@ifnextchar\bgroup{\concgobblenextarg}{\text{ \conciclicproposition}}}
	\renewcommand{\concgobblenextarg}[1]{, #1\@ifnextchar\bgroup{\concgobblenextarg}{\text{ \conciclicproposition}}}
\fi



